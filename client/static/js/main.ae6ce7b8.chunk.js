(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{18:function(e,t){e.exports="data:image/gif;base64,R0lGODlh+gD6AMQdALKysmtra8XFxezs7NnZ2YqKitTU1K6urvr6+s/Pz/Hx8fX19be3t/T09Jubm7y8vOfn59/f393d3XJycsrKyunp6cDAwHp6era2tuLi4oKCgqWlpZOTk////wAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTExIDc5LjE1ODMyNSwgMjAxNS8wOS8xMC0wMToxMDoyMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RTA4OUYxNzlCOTVBMTFFNUExQkVBRTQ2QUVBREI4QkYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RTA4OUYxN0FCOTVBMTFFNUExQkVBRTQ2QUVBREI4QkYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpFMDg5RjE3N0I5NUExMUU1QTFCRUFFNDZBRUFEQjhCRiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpFMDg5RjE3OEI5NUExMUU1QTFCRUFFNDZBRUFEQjhCRiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgH//v38+/r5+Pf29fTz8vHw7+7t7Ovq6ejn5uXk4+Lh4N/e3dzb2tnY19bV1NPS0dDPzs3My8rJyMfGxcTDwsHAv769vLu6ubi3trW0s7KxsK+urayrqqmop6alpKOioaCfnp2cm5qZmJeWlZSTkpGQj46NjIuKiYiHhoWEg4KBgH9+fXx7enl4d3Z1dHNycXBvbm1sa2ppaGdmZWRjYmFgX15dXFtaWVhXVlVUU1JRUE9OTUxLSklIR0ZFRENCQUA/Pj08Ozo5ODc2NTQzMjEwLy4tLCsqKSgnJiUkIyIhIB8eHRwbGhkYFxYVFBMSERAPDg0MCwoJCAcGBQQDAgEAACH5BAUZAB0ALAAAAAD6APoAAAX/YCeOZGmeaKqubOu+cCzPdG3feK7vfO//wKBwSCwaj8ikcslsOp/QqHRKrVqv2Kx2y+16v+CweEwum8/otHrNbrvf8Lh8Tq/b7/i8fs/v+/+AgYKDhIWGh4iJiouMjY6PkJGSk5SVlpeYmZqbnJ2en6ChoqOkpaanqKmqq6ytrq+wsbKztLW2t7i5uru8vb6/wMHCw8TFxsfIycrLzM3Oz9DR0tPU1dbX2Nna29zd3t/g4eLj5OXm5+jp6uvs7e7v8PHy8/T19vf4+fr7/P3+/wADChxIsKDBgwgTKlzIsKHDhxAjcqvgoIDFixYdGDgxIIGAjyA/JljAkULIkAYQ/5yLMCGAy5cwA1AoAQGAzZs4ATBQUCJDzp8MSJYrELNogAslHvz8KYAEgqU/E5gzarTCiAVQf5IYkBVn03JUi24UwbXrza1mbX4lFzbm2A5l06JNu3ZcW5hv45qda7auuLsv86a1yber33CAXQoeXDjrYXCJAyyWO0Kv46mJJ++tPPjxt5aAG4x4mpZBY6ievTkAXKCEgLRSSSg1S8BcA6JhNYh2asGwShIKZkONvRLDgePID7w1MYCA8+cEJPA8gQAC9OfSJWrfzr279+/gw4sfT768+fPo06tfz769+/fw48ufT7++/fv48+vfz7+///8ABijggAQWaOCBCCao4EKCDDbo4IMQRijhhBRWaOGFGGao4YYcdujhhyCGKOKIJJZo4okopqjiiiy26OKLMMYo44w01mjjjTjmqOOOPPboSAgAIfkEBRkAHQAsYgB1ACEADwAABXtgtyRCaZbJ0K1sZzhFLMdO1SkMoO88ALUdSmBILAYmEUFvCXgAL8ZooMBkLlgVqbS6VK0M2ii353WFjWNeGXwmpnfrtvsNiMsD9DqLLc/b5TlvCCwNdxMJbwJABXIOCEpcFoMtDRpnBQ0rChIEnZ4EZUAuB6SlBxgRKyEAIfkEBRkAHQAsdAB1ACIADwAABX5g1w2JYJ5msoisaHBFLMdbI0JAru8Ao7QdS2BILAYmlc6DxwQIWg2jdOhYNJstw1RaGFyZ2a2x++WFxURyWXdGB9RrQBsNX8/F9fJ9m//upwUIcT1/XB0CcQlAF24BBx0IFmUCCEARjGIOLQMEnZ4EEj9AIg0UB6eoBxgRIiEAOw=="},19:function(e,t,n){e.exports=n(34)},31:function(e,t,n){},34:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),o=n(17),r=n.n(o),c=n(11),i=n(4),l=n(5),u=n(7),m=n(6),p=n(8),d=n(35),h=n(13),g=n.n(h),f=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).upvote=function(e,t){n.props.user._id?fetch("/api/post/".concat(t,"/upvote"),{method:"POST",headers:{Authorization:"Bearer "+n.props.token,"Content-Type":"application/json"},body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(e){e.success?n.props.updateUser(e):console.log(e.message)}).catch(function(e){console.log(e)}):console.log("You are not logged in!")},n.downvote=function(e,t){n.props.user._id?fetch("/api/post/".concat(t,"/downvote"),{method:"POST",headers:{Authorization:"Bearer "+n.props.token,"Content-Type":"application/json"},body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(e){e.success?n.props.updateUser(e):console.log(e.message)}).catch(function(e){console.log(e)}):console.log("You are not logged in!")},n.deletePost=function(e,t){n.props.user._id?fetch("/api/post/".concat(t,"/delete"),{method:"DELETE",headers:{Authorization:"Bearer "+n.props.token,"Content-Type":"application/json"},body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(e){e.success?n.props.deletePost(e):console.log(e.message)}).catch(function(e){console.log(e)}):console.log("You are not logged in!")},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.post,n=t.title,o=t.text,r=t.created,c=t.username,i=t.upvotedby,l=t.downvotedby,u=t.author,m=t._id,p=this.props.user,h=p.upvotes,f=p.downvotes,E=i.length;return E=l.length?E-l.length:E,s.a.createElement(a.Fragment,null,s.a.createElement("div",{className:"post"},s.a.createElement("div",{className:"rank"},this.props.rank),s.a.createElement("div",{className:"votes"},s.a.createElement("div",{className:"arrow up ".concat(h&&h.includes(m)?"upvoted":""),onClick:function(){return e.upvote(e.props.user,m)}}),s.a.createElement("div",{className:"score"},E||0),s.a.createElement("div",{className:"arrow down ".concat(f&&f.includes(m)?"downvoted":""),onClick:function(){return e.downvote(e.props.user,m)}})),s.a.createElement(d.a,{to:"/post/".concat(m),className:"thumbnail self"}),s.a.createElement("div",{className:"content"},s.a.createElement("div",{className:"title-area"},s.a.createElement("span",{className:"title"},this.props.single?s.a.createElement("span",null,n):s.a.createElement(d.a,{to:"/post/".concat(m)},n)),s.a.createElement("span",{className:"url"},"(self.subreddit)")),s.a.createElement("div",{className:"meta-area"},"Submitted ",g()(r).fromNow()," by"," ",s.a.createElement(d.a,{to:"/user/".concat(c)},c)),s.a.createElement("div",{className:"link-area"},u==this.props.user._id||this.props.user.isAdmin?s.a.createElement("a",{onClick:function(){return e.deletePost(e.props.user,m)},className:"fake-link"},"delete"):""))),this.props.single&&o?s.a.createElement("div",{className:"post-text"},o):"")}}]),t}(a.Component),E=n(18),v=n.n(E),b=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).loadMorePosts=function(){n.props.getNextPosts()},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return this.props.loading?s.a.createElement("div",{className:"center"},s.a.createElement("img",{src:v.a,alt:"Loading animation"})):s.a.createElement("div",null,this.props.posts.map(function(t,n){return s.a.createElement(f,{key:n,user:e.props.user,token:e.props.token,updateUser:e.props.updateUser,deletePost:e.props.deletePost,post:t,rank:n+1})}),this.props.loadMore?s.a.createElement("div",{className:"pagination center"},s.a.createElement("span",{onClick:this.loadMorePosts,className:"load-more"},"Load more")):"")}}]),t}(a.Component),y=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).state={submit:!1,submitMessage:"Submitting..."},n.processPost=function(e){n.setState({submit:!0}),e.preventDefault();var t={};t.title=e.target.title.value,t.text=e.target.text.value,t.created=Date.now(),t.author=n.props.user._id,t.username=n.props.user.username,t.title&&fetch("/api/posts/new",{method:"POST",headers:{Authorization:"Bearer "+n.props.token,"Content-Type":"application/json"},body:JSON.stringify(t)}).then(function(e){return e.json()}).then(function(e){e.success?(n.props.submitPost(e),n.props.history.push("/post/".concat(e.post._id))):(e.tokenExpired&&n.props.tokenExpired(),n.setState({submit:!0,submitMessage:"Something went wrong, please contact the admin"}))}).catch(function(e){n.setState({submit:!0,submitMessage:"The server encountered an error, please contact the admin"})})},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("h3",null,"Submit a new post"),s.a.createElement("form",{onSubmit:this.processPost,className:"submit-form",action:""},s.a.createElement("div",{className:"input-box"},s.a.createElement("label",{htmlFor:"title"},"title"),s.a.createElement("input",{name:"title",type:"text",required:!0})),s.a.createElement("div",{className:"input-box"},s.a.createElement("label",{htmlFor:"text"},"text (optional)"),s.a.createElement("textarea",{name:"text",id:"",rows:"6"})),s.a.createElement("button",null,"submit"),this.state.submit?s.a.createElement("span",null,s.a.createElement("small",null," ",this.state.submitMessage)):""))}}]),t}(a.Component),A=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).deleteComment=function(){fetch("/api/post/".concat(n.props.comment._id,"/comment"),{method:"DELETE",headers:{Authorization:"Bearer "+n.props.token,"Content-Type":"application/json"},body:JSON.stringify(n.props.user)}).then(function(e){return e.json()}).then(function(e){e.success?(n.props.deleteComment(n.props.comment._id),console.log(e)):(e.tokenExpired,console.log(e))}).catch(function(e){console.log(e)})},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.comment,t=e.comment,n=e.author,a=e.username,o=e.created,r=e._id;return s.a.createElement("div",{className:"single-comment",id:"comment-id-".concat(r)},s.a.createElement("div",{className:"comment-author"},s.a.createElement(d.a,{to:"/user/".concat(a)},a)," ",g()(o).fromNow()),s.a.createElement("div",{className:"comment-body"},t),s.a.createElement("div",{className:"comment-meta"},n==this.props.user._id||this.props.user.isAdmin?s.a.createElement("span",{className:"fake-link",onClick:this.deleteComment},"Delete"):""))}}]),t}(a.Component),k=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).state={comments:[],submit:!1},n.deleteComment=function(e){var t=Object(c.a)(n.state.comments);t.forEach(function(n,a){n._id==e&&t.splice(a,1)}),n.setState({comments:t})},n.postComment=function(e){n.setState({submit:!0}),e.preventDefault();var t=e.target.comment.value;if(t){e.target.reset();var a=n.props.match.params.id,s={comment:t,author:n.props.user._id,username:n.props.user.username,post:a,created:Date.now()};fetch("/api/post/".concat(a,"/comment"),{method:"POST",headers:{Authorization:"Bearer "+n.props.token,"Content-Type":"application/json"},body:JSON.stringify(s)}).then(function(e){return e.json()}).then(function(e){if(e.success){var t=Object(c.a)(n.state.comments);t.push(e.comment),n.setState({comments:t,submit:!1}),n.props.history.push("#comment-id-".concat(e.comment._id))}else console.log(e),n.setState({submit:!1})}).catch(function(e){n.props.history.push("/?message=failed to post comment"),n.setState({submit:!1})})}else console.log("Comment is empty")},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;fetch("/api/post/".concat(t,"/comments/all"),{method:"GET",headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(t){t.success?e.setState({comments:t.comments}):console.log(t)}).catch(function(e){})}},{key:"render",value:function(){var e=this,t=this.props.getTheSinglePost(this.props.match.params.id);return t?s.a.createElement("div",null,s.a.createElement(f,{key:1,user:this.props.user,token:this.props.token,updateUser:this.props.updateUser,deletePost:this.props.deletePost,post:t,rank:1,single:!0}),s.a.createElement("div",{className:"comments"},this.state.comments.length&&this.state.comments.length>1?s.a.createElement("h3",null,"all ",this.state.comments.length," comments"):s.a.createElement("h3",null,this.state.comments.length," comments"),this.props.user&&this.props.user._id&&!this.props.user.banned?s.a.createElement("div",{className:"comment-form"},s.a.createElement("form",{onSubmit:this.postComment},s.a.createElement("textarea",{name:"comment",id:"",rows:"5",required:!0}),s.a.createElement("button",null,"Save")," ",this.state.submit?s.a.createElement("span",null," posting.."):"")):"",this.state.comments.map(function(t){return s.a.createElement(A,{token:e.props.token,user:e.props.user,comment:t,deleteComment:e.deleteComment,key:t._id})}))):s.a.createElement("div",null,s.a.createElement("h3",null,"Loading"))}}]),t}(a.Component),j=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).state={regError:!1,regErrorMsg:""},n.displayError=function(e){n.setState({regError:!0,regErrorMsg:e})},n.registerAccount=function(e){e.preventDefault();var t={};t.username=e.target.username.value.toLowerCase(),t.password=e.target.password.value,t.passwordConfirm=e.target.passwordConfirm.value,t.email=e.target.email.value,t.username&&t.password?fetch("/api/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(function(e){return e.json()}).then(function(e){e.success?(n.props.register(e),n.props.history.push("/")):n.displayError(e.message)}).catch(function(e){n.displayError("There was a problem connecting to the server"),console.log(e)}):n.displayError("Required fields are missing")},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement("div",{className:"reg-form"},s.a.createElement("h4",{className:"modal-title"},"Create a new account"),this.state.regError?s.a.createElement("div",{className:"reg-error"},this.state.regErrorMsg,s.a.createElement("div",{className:"close-button",onClick:function(){e.setState({regError:!1})}},"\xd7")):"",s.a.createElement("form",{onSubmit:this.registerAccount},s.a.createElement("input",{type:"text",name:"username",placeholder:"choose a username",required:!0}),s.a.createElement("input",{type:"password",name:"password",placeholder:"password",required:!0}),s.a.createElement("input",{type:"password",name:"passwordConfirm",placeholder:"verify password",required:!0}),s.a.createElement("input",{type:"email",name:"email",placeholder:"email",required:!0}),s.a.createElement("div",{className:"register-button-box"},s.a.createElement("button",{className:"button-primary"},"Sign Up")))))}}]),t}(a.Component),w=n(38),N=n(37),O=n(36),S=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).state={posts:[],currentUser:{}},n.adminAction=function(e){n.props.user._id?fetch("/api/user/".concat(n.props.match.params.username,"/action/").concat(e),{method:"POST",headers:{Authorization:"Bearer "+n.props.token,"Content-Type":"application/json"},body:JSON.stringify(n.props.user)}).then(function(e){return e.json()}).then(function(e){e.success?n.setState({currentUser:e.currentUser}):console.log(e)}).catch(function(e){console.log(e)}):console.log("You are not logged in!")},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("/api/user/".concat(this.props.match.params.username,"/posts")).then(function(e){return e.json()}).then(function(t){t.success?e.setState({posts:t.posts,currentUser:t.currentUser}):console.log(t)}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){var e=this,t=this.props.match.params.username,n=this.state.currentUser,a=n.isAdmin,o=n.banned;return s.a.createElement("div",null,s.a.createElement("div",{className:"user-area"},s.a.createElement("h2",null,t),this.props.user.isAdmin&&this.state.currentUser?s.a.createElement("div",{className:"admin-actions"},"Admin actions:"," ",o?s.a.createElement("button",{className:"load-more",onClick:function(){return e.adminAction("unban")}},"Unban User"):s.a.createElement("button",{className:"load-more red",onClick:function(){return e.adminAction("ban")}},"Ban User")," ",a?s.a.createElement("button",{className:"load-more",onClick:function(){return e.adminAction("removeadmin")}},"Remove Admin"):s.a.createElement("button",{className:"load-more",onClick:function(){return e.adminAction("makeadmin")}},"Make Admin")," ",s.a.createElement("button",{className:"load-more red",disabled:!0},"Delete User")," "):""),this.state.posts.map(function(t,n){return s.a.createElement(f,{key:n,user:e.props.user,token:e.props.token,updateUser:e.props.updateUser,deletePost:e.props.deletePost,post:t,rank:n+1})}))}}]),t}(a.Component);function C(e){return s.a.createElement("div",{id:"layout"},e.children)}var I=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).state={loading:!0,posts:[],user:{},token:"",loggedIn:!1,loginError:!1,loginMsg:"Something went wrong",currentPage:1,loadMore:!0},n.getNextPosts=function(){var e=Object(c.a)(n.state.posts);fetch("/api/posts/50/".concat(n.state.currentPage)).then(function(e){return e.json()}).then(function(t){t.posts.length?(t.posts.forEach(function(t){e.push(t)}),n.setState({posts:e,currentPage:n.state.currentPage+1}),console.log(t)):(console.log("End of the posts"),n.setState({loadMore:!1}))}).catch(function(e){return console.log(e)})},n.register=function(e){n.setState({loggedIn:!0,user:e.user,token:e.token});var t={loggedIn:!0,user:e.user,token:e.token};localStorage.setItem("userInfo",JSON.stringify(t))},n.tokenExpired=function(){n.logout()},n.login=function(e){e.preventDefault();var t={};t.username=e.target.username.value,t.password=e.target.password.value,t.username&&t.password?fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(function(e){return e.json()}).then(function(e){if(e.success){n.setState({loggedIn:!0,user:e.user,token:e.token});var t={loggedIn:!0,user:e.user,token:e.token};localStorage.setItem("userInfo",JSON.stringify(t))}else n.setState({loginError:!0,loginMsg:e.message})}).catch(function(e){console.log(e),n.setState({loginError:!0,loginMsg:e})}):n.setState({loginError:!0,loginMsg:"Missing credentials"})},n.logout=function(){n.setState({loggedIn:!1,token:void 0,user:{}}),localStorage.removeItem("userInfo")},n.submitPost=function(e){var t=Object(c.a)(n.state.posts);t.push(e.post),n.setState({posts:t,user:e.user}),localStorage.setItem("posts",JSON.stringify(t))},n.getTheSinglePost=function(e){return Object(c.a)(n.state.posts).filter(function(t){return t._id==e})[0]},n.updateUser=function(e){var t=Object(c.a)(n.state.posts);t.forEach(function(n,a){n._id==e.post._id&&(t[a]=e.post)}),n.setState({user:e.user,posts:t});var a=JSON.parse(localStorage.getItem("userInfo")),s={loggedIn:!0,user:e.user,token:a.token};localStorage.setItem("userInfo",JSON.stringify(s))},n.deletePost=function(e){var t=Object(c.a)(n.state.posts);t.forEach(function(n,a){n._id==e.deletedId&&t.splice(a,1)}),n.setState({posts:t})},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=JSON.parse(localStorage.getItem("userInfo"));t&&this.setState({loggedIn:!0,token:t.token,user:t.user}),fetch("/api/posts/all").then(function(e){return e.json()}).then(function(t){if(t.success){var n=t.data.sort(function(e,t){return 1+e.upvotedby.length-e.downvotedby.length>1+t.upvotedby.length-t.downvotedby.length?-1:1});e.setState({posts:n,loading:!1})}else console.log("Cannot load the file"),e.setState({loading:!1})}).catch(function(t){console.log(t),e.setState({loading:!1})})}},{key:"render",value:function(){var e=this;return s.a.createElement(w.a,null,s.a.createElement(C,null,s.a.createElement("header",{id:"header"},s.a.createElement("nav",{className:"top-menu"},"Home - Popular - All - Random"),s.a.createElement("div",{className:"main-header"},s.a.createElement(d.a,{to:"/",id:"header-img",className:"default-header"},"reddit clone"),s.a.createElement("div",{className:"tab-menu"}),s.a.createElement("div",{className:"user-header"},this.state.loggedIn?s.a.createElement("span",null,"Hello"," ",s.a.createElement(d.a,{className:"fake-link",to:"/user/".concat(this.state.user.username)},this.state.user.username)," ","|"," ",s.a.createElement("a",{className:"fake-link",onClick:this.logout},"logout")," "):s.a.createElement("span",null,"Want to join? ",s.a.createElement("a",{href:"#login"},"Log in")," or"," ",s.a.createElement(d.a,{to:"/register"},"sign up")," in seconds.")))),s.a.createElement("div",{id:"container"},s.a.createElement("main",{id:"body-submissions"},s.a.createElement(N.a,{exact:!0,path:"/",render:function(t){return s.a.createElement(b,Object.assign({loading:e.state.loading,user:e.state.user,posts:e.state.posts,token:e.state.token,updateUser:e.updateUser,deletePost:e.deletePost,getNextPosts:e.getNextPosts,currentPage:e.state.currentPage,loadMore:e.state.loadMore},t))}}),s.a.createElement(N.a,{path:"/submit",render:function(t){return e.state.loggedIn?s.a.createElement(y,Object.assign({user:e.state.user,token:e.state.token,tokenExpired:e.tokenExpired,submitPost:e.submitPost},t)):s.a.createElement(O.a,{to:"/"})}}),s.a.createElement(N.a,{exact:!0,path:"/user/:username",render:function(t){return s.a.createElement(S,Object.assign({user:e.state.user,posts:e.state.posts,token:e.state.token,updateUser:e.updateUser,deletePost:e.deletePost},t))}}),s.a.createElement(N.a,{exact:!0,path:"/post/:id",render:function(t){return s.a.createElement(k,Object.assign({user:e.state.user,token:e.state.token,updateUser:e.updateUser,deletePost:e.deletePost,posts:e.state.posts,getTheSinglePost:e.getTheSinglePost},t))}}),s.a.createElement(N.a,{path:"/register",render:function(t){return e.state.loggedIn?s.a.createElement(O.a,{to:"/"}):s.a.createElement(j,Object.assign({register:e.register},t))}})),s.a.createElement("aside",{id:"sidebar"},this.state.loggedIn?"":s.a.createElement("div",{className:"login-box",id:"login"},this.state.loginError?s.a.createElement("div",{className:"login-error"},this.state.loginMsg,s.a.createElement("div",{className:"close-button",onClick:function(){e.setState({loginError:!1})}},"\xd7")):"",s.a.createElement("form",{onSubmit:this.login},s.a.createElement("input",{className:"login-username",type:"text",name:"username",placeholder:"username",required:!0}),s.a.createElement("input",{className:"login-password",type:"password",name:"password",placeholder:"password",required:!0}),s.a.createElement("div",{className:"login-button-area"},s.a.createElement("a",{className:"login-reset-link",href:"/reset"},"reset password"),s.a.createElement("button",null,"login")))),this.state.loggedIn?s.a.createElement("div",{className:"submit-button"},s.a.createElement(d.a,{to:"/submit"},"Submit")):"")),s.a.createElement("footer",{className:"center",id:"footer"},s.a.createElement("div",{className:"copyright"}))))}}]),t}(a.Component);n(31),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(s.a.createElement(I,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[19,2,1]]]);
//# sourceMappingURL=main.ae6ce7b8.chunk.js.map